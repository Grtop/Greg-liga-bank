"use strict";window.addEventListener("load",function(){document.querySelector(".nojs").classList.remove("nojs"),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var a,r;if(null===this)throw new TypeError(" this is null or not defined");var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(1<arguments.length&&(a=t),r=0;r<i;){var l;r in n&&(l=n[r],e.call(a,l,r,n)),r++}}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e});function t(e){e.preventDefault(),n.forEach(function(e){e.parentNode.classList.remove(r.tab+"_active")});var t=e.currentTarget;t.classList.contains(a.tab)&&t.parentNode.classList.add(r.tab+"_active")}var a={nav:"header__nav-toggle",tab:"service-item__head"},r={tabList:"services__list",tab:"service-item"},e=document.querySelector("."+a.nav);if(e&&e.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector(".nav-main");if(e.target.classList.contains("header__nav-toggle")){if(e.target.classList.contains("header__nav-toggle_closed"))return e.target.classList.remove("header__nav-toggle_closed"),e.target.classList.add("header__nav-toggle_opened"),t.classList.remove("nav-main_closed"),void t.classList.add("nav-main_opened");if(e.target.classList.contains("header__nav-toggle_opened"))return e.target.classList.remove("header__nav-toggle_opened"),e.target.classList.add("header__nav-toggle_closed"),t.classList.remove("nav-main_opened"),void t.classList.add("nav-main_closed")}}),1008<document.body.offsetWidth){var n=document.querySelectorAll("."+a.tab);0<n.length&&n.forEach(function(e){e.addEventListener("click",t)})}else{var i=document.querySelector("."+r.tabList);i&&i.classList.add("swiper-wrapper");var l=document.querySelectorAll("."+r.tab);0<l.length&&l.forEach(function(e){e.classList.remove(r.tab+"_active"),e.classList.add("swiper-slide")})}if(document.querySelector(".slider"))new Swiper(".slider",{loop:!0,pagination:{el:".slider-pagination",type:"bullets",bulletElement:"button",clickable:!0,bulletClass:"slider-pagination__item",bulletActiveClass:"slider-pagination__item_active"}});if(document.body.offsetWidth<=1008&&document.querySelector(".services__slider"))new Swiper(".services__slider",{loop:!0,pagination:{el:".services-pagination",type:"bullets",bulletElement:"button",clickable:!0,bulletClass:"services-pagination__item",bulletActiveClass:"services-pagination__item_active"}});var _={};if(document.querySelector(".select")){new Select(".select",{idSelect:"#credit-target",classElement:"select__item",classActiveElement:"select__item_selected"});document.querySelector("#credit-target").addEventListener("change",function(e){e.preventDefault();function t(){var e,t,a;s.rate=function(){var e=100*_.initialSum/_.currentSum;if(1===_.status){var t={min:.085,max:.094};return e<15?t.max:t.min}if(2===_.status){t={min:.15,max:.16,low:.035,high:.085};return _.insuranceCar&&_.insuranceLife?t.low:_.insuranceCar||_.insuranceLife?t.high:_.currentSum<2e6?t.max:t.min}if(3===_.status){t={min:.095,mid:.125,max:.15};var a=0;return _.currentSum<75e4&&(a=t.max),75e4<=_.currentSum&&_.currentSum<2e6&&(a=t.mid),2e6<=_.currentSum&&(a=t.min),_.salaryClient&&(a-=.005),a}}(),s.value=(e=_.initialSum,_.parentCapital&&(e=_.initialSum+_.parentCapitalValue),_.currentSum-e),s.payment=(t=Number((s.rate/12).toFixed(5)),a=12*_.currentPeriod,Math.ceil(s.value*(t+t/(Math.pow(1+t,a)-1)))),s.income=Math.ceil(s.payment/.45),function(e){var t=document.querySelector("."+e),a=document.querySelector("."+e+"__deny");if(s.value<s.minValue)return t.style.display="none",a.style.display="block",a.querySelector(".offer__deny-target").innerText=s.desc;t.style.display="block",a.style.display="none";var r=t.querySelector("."+e+"__label"),n=t.querySelector("."+e+"__value"),i=t.querySelector("."+e+"__rate"),l=t.querySelector("."+e+"__payment"),c=t.querySelector("."+e+"__income");r.innerText=s.label,n.innerText=s.value+" "+_.currency,i.innerText=(100*s.rate).toFixed(2)+"%",l.innerText=s.payment+" "+_.currency,c.innerText=s.income+" "+_.currency}("offer")}var a=e.target,r=document.querySelector(".calculator__step-second"),n="none",i="mortgage-loan",l="car-loan",c="consumer-loan",s={};window.credit={update:t};for(var o=0;o<a.children.length;o++)if(a.children[o].hasAttribute("selected"))var u=a.children[o].getAttribute("value");switch(u){case n:_={status:0};break;case i:_={status:1,label:"Стоимость недвижимости",minSumTarget:12e5,maxSumTarget:25e6,stepSumTarget:1e5,initialSum:0,percent:.1,percentStep:.05,minPeriod:5,maxPeriod:30,stepPeriod:1,parentCapital:!1,parentCapitalValue:47e4},s={label:"Сумма ипотеки",desc:"ипотечные кредиты",minValue:5e5};break;case l:_={status:2,label:"Стоимость автомобиля",minSumTarget:5e5,maxSumTarget:5e6,stepSumTarget:5e4,initialSum:0,percent:.2,percentStep:.05,minPeriod:1,maxPeriod:5,stepPeriod:1,insuranceCar:!1,insuranceLife:!1},s={label:"Сумма автокредита",desc:"автокредиты",minValue:2e5};break;case c:_={status:3,label:"Сумма потребительского кредита",minSumTarget:5e5,maxSumTarget:3e6,stepSumTarget:5e4,initialSum:0,percent:.1,percentStep:.05,minPeriod:1,maxPeriod:7,stepPeriod:1,salaryClient:!1},s={label:"Сумма кредита"}}if(0!==_.status){if(_.currency="рублей",_.desc="от "+_.minSumTarget+" до "+_.maxSumTarget+" "+_.currency,_.currentSum=_.minSumTarget,_.currentPeriod=_.minPeriod,_.labelPeriod=["год","года","лет"],r.classList.add("calculator__step-show"),document.querySelector(".input-price__sum"))new InputPrice(".input-price__sum",_,{inputEl:"#price-target",descEl:".calculator__input-desc",btnIncrease:".input-price__btn_minus",btnDecrease:".input-price__btn_plus"});if(document.querySelector(".input-price__initial")){new InitialPrice(".input-price__initial",_,{inputEl:"#price-first",rangeEl:".range__price-first",rangeToggleEl:".range__roller",rangeValueEl:".range__value"});document.querySelector("#price-target").addEventListener("change",function(e){e.preventDefault(),window.initialPrice.update()})}if(document.querySelector(".input-price__period"))new Period(".input-price__period",_,{inputEl:"#credit-period",rangeEl:".range__credit-period",rangeToggleEl:".range__roller",rangeValueMinEl:".range__limit-start",rangeValueMaxEl:".range__limit-end"});var d=document.querySelector(".calculator__params");if(d){var m,p=function(e){e.preventDefault(),1===_.status&&(_.parentCapital=e.target.checked),2===_.status&&("insurance-car"===e.target.name&&(_.insuranceCar=e.target.checked),"insurance-life"===e.target.name&&(_.insuranceLife=e.target.checked)),3===_.status&&(_.salaryClient=e.target.checked),t()};d.querySelectorAll(".calculator__param").forEach(function(e){e.classList.remove("calculator__param_show"),function(e){for(var t=0;t<e.length;t++)e[t].onchange=""}(e.getElementsByTagName("input"))}),1===_.status&&(m=d.querySelector(".calculator__param_capital")),2===_.status&&(m=d.querySelector(".calculator__param_insurance")),3===_.status&&(m=d.querySelector(".calculator__param_client")),m.classList.add("calculator__param_show"),function(e,t){for(var a=0;a<e.length;a++)e[a].onchange=t}(m.getElementsByTagName("input"),p)}window.inputPrice.update(),window.initialPrice.update(),window.period.update(),t()}else r.classList.remove("calculator__step-show")})}});